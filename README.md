### Общая архитектура

Проект построен как **монолитное API-ориентированное приложение** (API-first Monolith). Архитектура спроектирована для быстрого старта разработки, но с запасом прочности для масштабирования до HighLoad-системы. В основе лежит принцип **модульности**: весь бизнес-функционал инкапсулирован в изолированные приложения внутри директории `apps/`.

Система следует стандартам **Twelve-Factor App**, что обеспечивает её готовность к развертыванию в облачных средах (Kubernetes/Docker) и легкость в горизонтальном масштабировании.

### Уровни системы

Архитектура разделена на логические слои, чтобы снизить связность кода (Loose Coupling):

1. **Инфраструктурный слой (`config/`, `pyproject.toml`)**:
    * Централизованная конфигурация, отделенная от кода бизнес-логики.
    * Управление зависимостями через современный стандарт PEP 735 (dependency groups), что упрощает CI/CD пайплайны.
    * Сюда входят настройки безопасности, логирования и подключений к БД.
2. **Слой API (Interface Layer)**:
    * Отвечает за принятие запросов и валидацию входных данных.
    * Реализован на **Django REST Framework**.
    * Строгое разделение: ViewSet'ы занимаются только HTTP-логикой, не содержат бизнес-правил.
3. **Слой бизнес-логики (Domain Layer)**:
    * Расположен внутри приложений в `apps/`.
    * Инкапсулирует правила работы системы. Здесь живут сервисы (Services) и селекторы (Selectors), которые отделены от моделей и view.
    * Модели данных ("толстые модели" используются умеренно) отвечают только за целостность данных, но не за сложные процессы.
4. **Слой данных (Persistence Layer)**:
    * PostgreSQL как основное хранилище.
    * Использование миграций Django для версионирования схемы БД.

### Ключевые архитектурные решения

* **Изоляция приложений**:
Каждый модуль в папке `apps/` (например, `users`, `billing`) проектируется как независимый компонент с собственным пространством имен (`apps.users`). Это предотвращает "спагетти-импорты" и облегчает будущий вынос модулей в микросервисы при необходимости.
* **Безопасность по умолчанию**:
В архитектуру встроены инструменты статического анализа (`bandit`, `ruff`), которые на этапе разработки блокируют уязвимый код. Конфигурация Django (`settings.py`) ужесточена для production-среды.
* **Строгая типизация и качество кода**:
Проект не допускает неявных типов. Использование `mypy` и `ruff` гарантирует, что кодовая база остается чистой, читаемой и предсказуемой, что критично для командной разработки.
* **Готовность к Observability**:
Архитектура подразумевает, что логирование и метрики (Tracing/Metrics) внедряются через middleware и не загрязняют бизнес-код, что упрощает подключение систем мониторинга (Prometheus/Grafana/Sentry).


---

Это **Modern Python Backend** архитектура: она отказывается от устаревших практик (как requirements.txt или запутанных settings) в пользу строгих стандартов, типизации и модульности. Она идеально подходит для команд, где важны скорость разработки (Time-to-Market) и надежность (Reliability).
